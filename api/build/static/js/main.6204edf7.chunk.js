(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{13:function(t,e,s){},51:function(t,e,s){"use strict";s.r(e);var n=s(0),i=s(1),r=s.n(i),c=s(26),a=s.n(c),o=s(3),l=s.n(o),u=s(4),j=s(7),d=s(8),h=s(10),b=s(9),p=s(6),O=s.n(p),f=(s(13),s(11)),g=s(14);O.a.defaults.withCredentials=!0;var x=r.a.createContext(),m=x.Provider,y=(x.Consumer,function(t){Object(h.a)(s,t);var e=Object(b.a)(s);function s(){var t;Object(j.a)(this,s);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).state={artistLibrary:[],user:{},displayOptions:["My Library","Create","User Info"],display:"Base",loggedIn:t.props.loggedIn,api:""},t.startup=Object(u.a)(l.a.mark((function e(){var s,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("api: ",t.state.api),console.log("cookies: ",document.cookie),e.next=4,t.getMusic();case 4:return s=e.sent,e.next=7,t.getUser();case 7:n=e.sent,t.setContextState("artistLibrary",s.data.sort((function(t,e){return t.name>e.name?1:-1}))),t.setContextState("user",n.data),console.log("user: ",t.state.user);case 11:case"end":return e.stop()}}),e)}))),t.getMusic=function(){console.log("getting your music now");var e={method:"get",url:t.state.api+"library",withCredentials:!0};return console.log("music url: ",e.url),O()(e)},t.getUser=function(){console.log("getting user info now");var e={method:"get",url:t.state.api+"userinfo",withCredentials:!0};return O()(e)},t.setContextState=function(e,s){t.setState(Object(g.a)({},e,s))},t.createPlaylist=function(){var e=Object(u.a)(l.a.mark((function e(s,n){var i,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("i am about to create a playlist using this name: ",n),console.log("just checking the array: ",s),i={method:"post",url:t.state.api+"newplaylist",data:{trackList:s,playlistName:n,user:t.state.user.id,withCredentials:!0}},console.log(document.cookie),e.next=6,O()(i);case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),t}return Object(d.a)(s,[{key:"componentDidMount",value:function(){console.log("this is the production build "),this.setState({api:"mendoza-playlist.herokuapp.com/"})}},{key:"render",value:function(){return Object(n.jsx)(m,{value:Object(f.a)(Object(f.a)({},this.state),{},{startup:this.startup,setContextState:this.setContextState,createPlaylist:this.createPlaylist}),children:this.props.children})}}]),s}(i.Component)),v=function(){return Object(i.useContext)(x).artistLibrary.length>0?Object(n.jsx)(I,{}):Object(n.jsx)("p",{children:"Please hold while I get your tracks!"})},k=s(5),L=s(17),C=r.a.createContext(),w=C.Provider,S=(C.Consumer,function(t){Object(h.a)(s,t);var e=Object(b.a)(s);function s(t){var n;return Object(j.a)(this,s),(n=e.call(this,t)).setCreateOption=function(t){console.log("creating by: ",t),n.setState({createOption:t})},n.setList=function(t){n.setState({list:t})},n.setSelectedList=function(t){n.setState({selectedList:t})},n.setArtistList=function(t){n.setState({artistList:t})},n.setTrackList=function(t){n.setState({trackList:t})},n.changeOption=function(t,e){var s=e;if(s.includes(t)){var n=s.indexOf(t);n>-1&&(console.log("removing option: ",t),s.splice(n,1))}else console.log("adding option: ",t),s.push(t);return s},n.changeArtistOption=function(t){var e=n.state.artistList;if(e.includes(t)){var s=e.indexOf(t);s>-1&&(console.log("removing this from your artistList: ",t),e.splice(s,1))}n.setArtistList(e)},n.clearSelection=function(){"create"===n.state.createOption&&n.setCreateOption(""),n.setSelectedList([]),n.setArtistList([])},n.resetState=function(){n.setState({createOption:"",list:[],selectedList:[],artistList:[]})},n.goBack=function(){n.state.selectedList.length>0?"string"===typeof n.state.selectedList[0]?(n.setCreateOption("genre"),n.setArtistList([])):(n.setCreateOption("artist"),n.setArtistList([])):n.resetState()},n.associateArtists=function(t,e){console.log("associating artists");var s=n.compileGenres(t),i=n.findArtistsByGenre(s,e);return t.forEach((function(t){i.includes(t)||i.push(t)})),i.sort((function(t,e){return t.name>e.name?1:-1}))},n.compileGenres=function(t){var e=[];return t.forEach((function(t){t.genres.forEach((function(t){e.includes(t)||e.push(t)}))})),e.sort(),e},n.findArtistsByGenre=function(t,e){var s=[];return t.forEach((function(t){e.forEach((function(e){e.genres.includes(t)&&s.push(e)}))})),Object(L.a)(new Set(s))},n.pullTracksFromArtists=function(t){var e=[];return t.forEach((function(t){t.music.forEach((function(t){t.tracks.forEach((function(t){e.push(t)}))}))})),Object(L.a)(new Set(e))},n.pullURIFromTracks=function(t){var e=[];return t.forEach((function(t){e.push(t.uri)})),e},n.changePlaylistLink=function(t){n.setState({playlistLink:t})},n.state={createOption:"",list:[],selectedList:[],artistList:[],trackList:[],playlistLink:""},n}return Object(d.a)(s,[{key:"render",value:function(){return Object(n.jsx)(w,{value:Object(f.a)(Object(f.a)({},this.state),{},{setCreateOption:this.setCreateOption,setList:this.setList,setSelectedList:this.setSelectedList,setArtistList:this.setArtistList,setTrackList:this.setTrackList,changeOption:this.changeOption,clearSelection:this.clearSelection,associateArtists:this.associateArtists,compileGenres:this.compileGenres,findArtistsByGenre:this.findArtistsByGenre,pullTracksFromArtists:this.pullTracksFromArtists,changeArtistOption:this.changeArtistOption,pullURIFromTracks:this.pullURIFromTracks,goBack:this.goBack,changePlaylistLink:this.changePlaylistLink}),children:this.props.children})}}]),s}(i.Component)),N=s.p+"static/media/Spotify_Icon_RGB_Black.0e932c0a.png",A=function(t){var e=t.artist,s=e.name,r=e.music,c=e.images,a=Object(i.useContext)(C).pullTracksFromArtists,o=Object(i.useState)(0),l=Object(k.a)(o,2),u=l[0],j=l[1],d=Object(i.useState)(!1),h=Object(k.a)(d,2),b=h[0],p=h[1];Object(i.useEffect)((function(){O()}),[e]);var O=function(){var t=0;r.forEach((function(e){t+=e.tracks.length})),j(t),0===c.length&&c.push({url:N})};return function(){var t=a([e]);return b?(console.log("artists track list: ",t),Object(n.jsxs)("tr",{className:"singleArtist",onClick:function(){p(!b)},children:[Object(n.jsx)("td",{children:Object(n.jsx)("img",{className:"artistImage",src:c[0]?c[0].url:N})}),Object(n.jsx)(B,{list:t})]})):Object(n.jsxs)("tr",{className:"singleArtist",onClick:function(){p(!b)},children:[Object(n.jsx)("td",{children:Object(n.jsx)("img",{className:"artistImage",src:c[0]?c[0].url:N})}),Object(n.jsx)("td",{children:Object(n.jsx)("b",{children:s})}),Object(n.jsx)("td",{children:r.length}),Object(n.jsx)("td",{children:u})]})}()},I=function(){var t=Object(i.useContext)(x).artistLibrary;return Object(n.jsxs)("div",{className:"libraryPage",children:[Object(n.jsx)("h1",{children:"Here is your library:"}),Object(n.jsxs)("p",{children:["You have ",t.length," artists in your library"]}),Object(n.jsxs)("table",{className:"artistList",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{className:"artistListHead",children:[Object(n.jsx)("th",{}),Object(n.jsx)("th",{children:"Artist"}),Object(n.jsx)("th",{children:"Saved Albums"}),Object(n.jsx)("th",{children:"Saved Tracks"})]})}),Object(n.jsx)("tbody",{className:"artistListBody",children:t.map((function(t){return Object(n.jsx)(A,{artist:t},t.name)}))})]})]})},B=function(t){return Object(n.jsxs)("table",{className:"trackList",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Track Name"}),Object(n.jsx)("th",{children:"Album"}),Object(n.jsx)("th",{children:"Artist"})]})}),Object(n.jsx)("tbody",{children:t.list.map((function(e){return function(e){for(var s="",i=0;i<e.artists.length-1;i++)s+=e.artists[i],s+=", ";return s+=e.artists[e.artists.length-1],Object(n.jsxs)("tr",{className:"track",onClick:function(){return t.remove?t.remove(e):console.log(e)},children:[Object(n.jsx)("td",{children:e.name}),Object(n.jsx)("td",{children:e.albumName}),Object(n.jsx)("td",{children:s})]},e.name)}(e)}))})]})},T=function(t){var e,s=t.changeLogin,r=t.spotifyURL,c=Object(i.useState)({}),a=Object(k.a)(c,2),o=a[0],l=a[1],u=Object(i.useContext)(x).startup;Object(i.useEffect)((function(){l(r)}),[r]);return void 0===o?Object(n.jsx)("p",{children:"We are generating your sign in link now"}):Object(n.jsx)("button",{className:"signInButton",onClick:function(){return function(){e=window.open(r,"Spotify","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730"),console.log("this is the url I am opening: ",r);var t=setInterval((function(){e.closed&&(clearInterval(t),s(),console.log("window closed"),u())}),1e3)}()},children:"Log In"})},P=function(){var t=Object(i.useContext)(x),e=t.artistLibrary,s=t.display;return e.length>0?Object(n.jsx)("div",{className:"homeDiv",children:Object(n.jsx)(S,{children:"My Library"===s?Object(n.jsx)(v,{}):"Create"===s?Object(n.jsx)(U,{}):"User Info"===s?Object(n.jsx)(M,{}):"Base"===s?Object(n.jsxs)("div",{className:"instructions",children:[Object(n.jsx)("h1",{children:"Ok, let's get to work!"}),Object(n.jsx)("p",{children:"Make a selection above to get started"})]}):void 0})}):Object(n.jsx)("div",{className:"homeDiv",children:Object(n.jsx)("h3",{children:"Please hold while I retrieve your music library!"})})},E=s.p+"static/media/Spotify_Logo_RGB_Black.0d1e5545.png",G=function(t){var e=t.loggedIn,s=t.changeLogin,r=t.spotifyURL,c=Object(i.useContext)(x),a=c.displayOptions,o=c.setContextState;return e?Object(n.jsxs)("div",{className:"navbar",children:[Object(n.jsx)("div",{className:"logoDiv",children:Object(n.jsx)("img",{src:E,alt:"logo",className:"logo"})}),Object(n.jsx)("ul",{className:"menu",children:a.map((function(t,e){return Object(n.jsx)("li",{id:"menuItem",onClick:function(){o("display",t)},children:t},e)}))})]}):Object(n.jsxs)("div",{className:"navbar",children:[Object(n.jsx)("div",{className:"logoDiv",children:Object(n.jsx)("img",{src:E,alt:"logo",className:"logo"})}),Object(n.jsx)(T,{changeLogin:s,spotifyURL:r})]})},M=function(){var t=Object(i.useContext)(x).user;return Object(n.jsxs)("div",{className:"userInfo",children:[Object(n.jsxs)("h1",{children:[t.display_name,":"]}),function(t){return Object(n.jsxs)("ul",{className:"infoList",children:[Object(n.jsxs)("li",{children:[Object(n.jsx)("b",{children:"Username:"})," ",t.display_name]}),Object(n.jsxs)("li",{children:[Object(n.jsx)("b",{children:"Country:"})," ",t.country]}),Object(n.jsxs)("li",{children:[Object(n.jsx)("b",{children:"Email:"})," ",t.email]}),Object(n.jsxs)("li",{children:[Object(n.jsx)("b",{children:"Subscription Type:"})," ",t.product]})]})}(t)]})},U=function(){var t=Object(i.useContext)(C),e=t.createOption,s=t.playlistLink;return Object(n.jsxs)("div",{className:"createPage",children:[Object(n.jsxs)("div",{className:"createHead",children:[Object(n.jsx)("h1",{children:"Create a playlist"}),Object(n.jsxs)("h2",{className:"instructions",children:["On this page, you can select as many ",e,"s as you like, and the app will automatically add them to your list of selected ",e,'s. When you are done selecting, click the "Show Playlist" button below to see all the songs that will be added to your playlist.']}),Object(n.jsx)(R,{})]}),"genre"===e?Object(n.jsxs)("div",{className:"create",children:[Object(n.jsx)(D,{}),Object(n.jsx)(F,{})]}):"artist"===e?Object(n.jsxs)("div",{className:"create",children:[Object(n.jsx)(_,{}),Object(n.jsx)(F,{})]}):"create"===e?Object(n.jsx)("div",{className:"create",children:Object(n.jsx)(F,{})}):"success"===e?Object(n.jsxs)("div",{className:"create",children:[Object(n.jsx)("p",{className:"success",children:"Congrats! You just created your playlist. Click the button to view it in your browser."}),Object(n.jsx)("button",{onClick:function(){window.open(s,"Spotify")},children:"View playlist"})]}):Object(n.jsxs)("div",{className:"createPage",children:[Object(n.jsx)("p",{children:"Use this page to create playlists based on all the genres present in your library or by one or multiple artists present in your library."}),Object(n.jsx)("p",{children:"Make a selection to continue."})]})]})},R=function(){var t=Object(i.useContext)(x).artistLibrary,e=Object(i.useContext)(C),s=e.createOption,r=e.selectedList,c=e.artistList,a=e.setCreateOption,o=e.setList,l=e.setSelectedList,u=e.compileGenres,j=e.findArtistsByGenre,d=function(e,n){if("create"===s&&"create"!==e)"genre"===e?(console.log("create option switched from create to genre"),r.every((function(t){return"string"===typeof t}))?(console.log("create option used to be genre"),a(e)):(console.log("create option used to be artist"),l(u(r)),a(e),o(n))):"artist"===e&&(console.log("create option switched from create to artist"),r.every((function(t){return"object"===typeof t}))?(console.log("create option used to be artist"),a(e)):(console.log("create option used to be genre"),l(c),a(e),o(t)));else if("artist"===s&&"genre"===e){l(u(r)),a(e),o(n)}else if("genre"===s&&"artist"===e){l(j(r,t)),a(e),o(n)}else{if(s===e)return;o(n),a(e),l([])}};return Object(n.jsxs)("div",{className:"createSelections",children:[Object(n.jsx)("button",{onClick:function(){return d("genre",u(t))},children:"Create by genre"}),Object(n.jsx)("button",{onClick:function(){return d("artist",t)},children:"Create by artist"})]})},D=function(){var t=Object(i.useContext)(C).list;return Object(n.jsx)("ul",{className:"list",children:t.map((function(t,e){return Object(n.jsx)(H,{item:t},e)}))})},F=function(){var t=Object(i.useContext)(C),e=t.createOption,s=t.setCreateOption,r=t.changePlaylistLink,c=t.selectedList,a=t.artistList,o=t.trackList,j=t.setSelectedList,d=t.setTrackList,h=t.changeOption,b=t.pullURIFromTracks,p=Object(i.useContext)(x).createPlaylist,O=Object(i.useRef)(null),f=Object(i.useState)("default-genre"),g=Object(k.a)(f,2),m=g[0],y=g[1],v=function(){var t=Object(u.a)(l.a.mark((function t(){var e,n,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=O.current.value){t.next=7;break}console.log("you need a name!"),alert("You need to name your playlist first!"),O.current.value="GIVE ME A NAME FIRST",t.next=14;break;case 7:return n=b(o),t.next=10,p(n,e);case 10:i=t.sent,console.log("playlistURL: ",i),r(i.data),s("success");case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),L=function(t){d(h(t,o))};return"artist"===e?Object(n.jsxs)("div",{className:"playlistMaker",children:[Object(n.jsx)("p",{children:"Here are your selected artists so far:"}),Object(n.jsx)("ul",{className:"playlistMakerList",children:c.sort((function(t,e){return t.name>e.name?1:-1})).map((function(t,e){return Object(n.jsx)("li",{onClick:function(e){j(h(t,c))},children:t.name},e)}))}),Object(n.jsx)(z,{})]}):"genre"===e?Object(n.jsxs)("div",{className:"playlistMaker",children:[Object(n.jsx)("p",{children:"Here are your selected genres so far:"}),"default-genre"===m?Object(n.jsx)("ul",{className:"playlistMakerList",children:c.sort().map((function(t,e){return Object(n.jsx)("li",{onClick:function(e){j(h(t,c))},children:t},e)}))}):"default-artist"===m?Object(n.jsx)("ul",{className:"playlistMakerList",children:a.sort((function(t,e){return t.name>e.name?1:-1})).map((function(t,e){return Object(n.jsx)("li",{children:t.name},e)}))}):void 0,Object(n.jsx)(z,{display:m,setDisplay:y})]}):"create"===e?Object(n.jsxs)("div",{className:"playlistMaker",children:[Object(n.jsx)("p",{children:"Here is the current version of your playlist:"}),Object(n.jsx)(B,{list:o,remove:L}),Object(n.jsxs)("form",{className:"name-playlist",children:[Object(n.jsx)("label",{children:"Name your playlist:"}),Object(n.jsx)("input",{type:"text",name:"Name your playlist",ref:O})]}),Object(n.jsx)("b",{children:"Clicking 'Create' below will create a playlist with these artists"}),Object(n.jsx)("br",{}),Object(n.jsx)(z,{beginPlaylist:v})]}):void 0},_=function(){var t=Object(i.useContext)(C).list;return Object(n.jsx)("ul",{className:"list",children:t.map((function(t,e){return Object(n.jsx)(H,{item:t},e)}))})},H=function(t){var e=t.item,s=Object(i.useContext)(C),r=s.selectedList,c=s.setSelectedList,a=s.changeOption,o=!1,l="object"===typeof e?e.name:e;return r.includes(e)&&(o=!0),Object(n.jsx)("li",{children:Object(n.jsxs)("label",{children:[Object(n.jsx)("input",{type:"checkbox",checked:o,value:l,onChange:function(t){return c(a(e,r))}}),l]})})},z=function(t){var e=Object(i.useContext)(C),s=e.createOption,r=e.selectedList,c=e.setCreateOption,a=e.setSelectedList,o=e.setArtistList,l=e.setTrackList,u=e.clearSelection,j=e.associateArtists,d=e.findArtistsByGenre,h=e.pullTracksFromArtists,b=e.goBack,p=Object(i.useContext)(x).artistLibrary,O=function(){var t=r;"genre"===s&&(t=d(t,p));var e=h(t).sort((function(t,e){return t.artists[0]>e.artists[0]?1:-1}));l(e),c("create")};return"genre"===s?Object(n.jsxs)("div",{className:"createButtons",children:[Object(n.jsx)("button",{onClick:function(){return function(){if(console.log("toggling: ",t.display),"default-genre"===t.display){var e=d(r,p);o(e),t.setDisplay("default-artist")}else"default-artist"===t.display&&t.setDisplay("default-genre")}()},children:"default-genre"===t.display?"Show Artists":"Show Selected Genres"}),Object(n.jsx)("button",{onClick:function(){return O()},children:"Show Playlist"}),Object(n.jsx)("button",{onClick:function(){u(),t.setDisplay("default-genre")},children:"Clear Selection"})]}):"artist"===s?Object(n.jsxs)("div",{className:"createButtons",children:[Object(n.jsx)("button",{onClick:function(){return a(j(r,p))},children:"Associate Artists"}),Object(n.jsx)("button",{onClick:function(){return O()},children:"Show Playlist"}),Object(n.jsx)("button",{onClick:function(){u()},children:"Clear Selection"})]}):"create"===s?Object(n.jsxs)("div",{className:"createButtons",children:[Object(n.jsx)("button",{onClick:function(){return t.beginPlaylist()},children:"Create"}),Object(n.jsx)("button",{onClick:function(){return b()},children:"Go Back"}),Object(n.jsx)("button",{onClick:function(){u()},children:"Clear Selection"})]}):void 0},W=function(t){Object(h.a)(s,t);var e=Object(b.a)(s);function s(t){var n;return Object(j.a)(this,s),(n=e.call(this,t)).changeLogin=function(){console.log("changing login state now"),n.setState({loggedIn:!0})},n.state={url:void 0,loggedIn:!1,cookie:""},n}return Object(d.a)(s,[{key:"componentDidMount",value:function(){var t=Object(u.a)(l.a.mark((function t(){var e,s,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=function(){return(n=Object(u.a)(l.a.mark((function t(){var e,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="",e="https://mendoza-playlist.herokuapp.com/login",t.next=4,O()({method:"get",url:e,withCredentials:!0});case 4:return s=t.sent,t.abrupt("return",s.data.body);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)},s=function(){return n.apply(this,arguments)},t.next=5,s();case 5:e=t.sent,this.setState({url:e});case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.loggedIn&&void 0!==this.state.url?Object(n.jsxs)(y,{children:[Object(n.jsx)(G,{loggedIn:this.state.loggedIn}),Object(n.jsx)("div",{className:"topLevel",children:Object(n.jsx)(P,{})})]}):Object(n.jsxs)(y,{loggedIn:this.state.loggedIn,children:[Object(n.jsx)(G,{loggedIn:this.state.loggedIn,changeLogin:this.changeLogin,spotifyURL:this.state.url}),Object(n.jsxs)("div",{className:"topLevel",children:[Object(n.jsx)("h1",{children:"Welcome to my Spotify playlist generator app!"}),Object(n.jsx)("p",{children:"This app will allow you to generate playlists using songs already in your library. This assists with playlist generation for users who have lots of songs already in their library and automates the process of manually going through and adding songs to a playlist one by one."}),Object(n.jsx)("h2",{children:"To get started, click the log in button above to generate a sign in link."})]})]})}}]),s}(i.Component);a.a.render(Object(n.jsx)(W,{}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.6204edf7.chunk.js.map