(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{13:function(t,e,s){},51:function(t,e,s){"use strict";s.r(e);var n=s(0),r=s(1),i=s.n(r),c=s(26),a=s.n(c),o=s(3),l=s.n(o),u=s(11),j=s(5),d=s(6),b=s(8),h=s(7),O=s(9),p=s.n(O),f=(s(13),s(10)),g=s(14),x=i.a.createContext(),m=x.Provider,y=(x.Consumer,function(t){Object(b.a)(s,t);var e=Object(h.a)(s);function s(){var t;Object(j.a)(this,s);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={artistLibrary:[],user:{},displayOptions:["My Library","Create","User Info"],display:"Base",loggedIn:t.props.loggedIn},t.startup=Object(u.a)(l.a.mark((function e(){var s,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMusic();case 2:return s=e.sent,e.next=5,t.getUser();case 5:n=e.sent,t.setContextState("artistLibrary",s.data.sort((function(t,e){return t.name>e.name?1:-1}))),t.setContextState("user",n.data);case 8:case"end":return e.stop()}}),e)}))),t.getMusic=function(){console.log("getting your music now");return p()({method:"get",url:"http://localhost:8888/library"})},t.getUser=function(){console.log("getting user info now");return p()({method:"get",url:"http://localhost:8888/userinfo"})},t.setContextState=function(e,s){t.setState(Object(g.a)({},e,s))},t.createPlaylist=function(e,s){console.log("i am about to create a playlist using this name: ",s),console.log("just checking the array: ",e),p()({method:"post",url:"http://localhost:8888/newplaylist",data:{trackList:e,playlistName:s,user:t.state.user.id}})},t}return Object(d.a)(s,[{key:"render",value:function(){return Object(n.jsx)(m,{value:Object(f.a)(Object(f.a)({},this.state),{},{startup:this.startup,setContextState:this.setContextState,createPlaylist:this.createPlaylist}),children:this.props.children})}}]),s}(r.Component)),v=function(){return Object(r.useContext)(x).artistLibrary.length>0?Object(n.jsx)(I,{}):Object(n.jsx)("p",{children:"Please hold while I get your tracks!"})},k=s(4),L=s(17),C=i.a.createContext(),S=C.Provider,N=(C.Consumer,function(t){Object(b.a)(s,t);var e=Object(h.a)(s);function s(t){var n;return Object(j.a)(this,s),(n=e.call(this,t)).setCreateOption=function(t){console.log("creating by: ",t),n.setState({createOption:t})},n.setList=function(t){n.setState({list:t})},n.setSelectedList=function(t){n.setState({selectedList:t})},n.setArtistList=function(t){n.setState({artistList:t})},n.setTrackList=function(t){n.setState({trackList:t})},n.changeOption=function(t,e){var s=e;if(s.includes(t)){var n=s.indexOf(t);n>-1&&(console.log("removing option: ",t),s.splice(n,1))}else console.log("adding option: ",t),s.push(t);return s},n.changeArtistOption=function(t){var e=n.state.artistList;if(e.includes(t)){var s=e.indexOf(t);s>-1&&(console.log("removing this from your artistList: ",t),e.splice(s,1))}n.setArtistList(e)},n.clearSelection=function(){"create"===n.state.createOption&&n.setCreateOption(""),n.setSelectedList([]),n.setArtistList([])},n.resetState=function(){n.setState({createOption:"",list:[],selectedList:[],artistList:[]})},n.goBack=function(){n.state.selectedList.length>0?"string"===typeof n.state.selectedList[0]?(n.setCreateOption("genre"),n.setArtistList([])):(n.setCreateOption("artist"),n.setArtistList([])):n.resetState()},n.associateArtists=function(t,e){console.log("associating artists");var s=n.compileGenres(t),r=n.findArtistsByGenre(s,e);return t.forEach((function(t){r.includes(t)||r.push(t)})),r.sort((function(t,e){return t.name>e.name?1:-1}))},n.compileGenres=function(t){var e=[];return t.forEach((function(t){t.genres.forEach((function(t){e.includes(t)||e.push(t)}))})),e.sort(),e},n.findArtistsByGenre=function(t,e){var s=[];return t.forEach((function(t){e.forEach((function(e){e.genres.includes(t)&&s.push(e)}))})),Object(L.a)(new Set(s))},n.pullTracksFromArtists=function(t){var e=[];return t.forEach((function(t){t.music.forEach((function(t){t.tracks.forEach((function(t){e.push(t)}))}))})),Object(L.a)(new Set(e))},n.pullURIFromTracks=function(t){var e=[];return t.forEach((function(t){e.push(t.uri)})),e},n.state={createOption:"",list:[],selectedList:[],artistList:[],trackList:[]},n}return Object(d.a)(s,[{key:"render",value:function(){return Object(n.jsx)(S,{value:Object(f.a)(Object(f.a)({},this.state),{},{setCreateOption:this.setCreateOption,setList:this.setList,setSelectedList:this.setSelectedList,setArtistList:this.setArtistList,setTrackList:this.setTrackList,changeOption:this.changeOption,clearSelection:this.clearSelection,associateArtists:this.associateArtists,compileGenres:this.compileGenres,findArtistsByGenre:this.findArtistsByGenre,pullTracksFromArtists:this.pullTracksFromArtists,changeArtistOption:this.changeArtistOption,pullURIFromTracks:this.pullURIFromTracks,goBack:this.goBack}),children:this.props.children})}}]),s}(r.Component)),w=s.p+"static/media/Spotify_Icon_RGB_Black.0e932c0a.png",A=function(t){var e=t.artist,s=e.name,i=e.music,c=e.images,a=Object(r.useContext)(C).pullTracksFromArtists,o=Object(r.useState)(0),l=Object(k.a)(o,2),u=l[0],j=l[1],d=Object(r.useState)(!1),b=Object(k.a)(d,2),h=b[0],O=b[1];Object(r.useEffect)((function(){p()}),[e]);var p=function(){console.log("music: ",i);var t=0;i.forEach((function(e){t+=e.tracks.length})),j(t),console.log(u),0===c.length&&c.push({url:w})};return function(){var t=a([e]);return h?(console.log("artists track list: ",t),Object(n.jsxs)("tr",{className:"singleArtist",onClick:function(){O(!h)},children:[Object(n.jsx)("td",{children:Object(n.jsx)("img",{className:"artistImage",src:c[0]?c[0].url:w})}),Object(n.jsx)(B,{list:t})]})):Object(n.jsxs)("tr",{className:"singleArtist",onClick:function(){O(!h)},children:[Object(n.jsx)("td",{children:Object(n.jsx)("img",{className:"artistImage",src:c[0]?c[0].url:w})}),Object(n.jsx)("td",{children:Object(n.jsx)("b",{children:s})}),Object(n.jsx)("td",{children:i.length}),Object(n.jsx)("td",{children:u})]})}()},I=function(){var t=Object(r.useContext)(x).artistLibrary;return Object(n.jsxs)("div",{className:"libraryPage",children:[Object(n.jsx)("h1",{children:"Here is your library:"}),Object(n.jsxs)("p",{children:["You have ",t.length," artists in your library"]}),Object(n.jsxs)("table",{className:"artistList",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{className:"artistListHead",children:[Object(n.jsx)("th",{}),Object(n.jsx)("th",{children:"Artist"}),Object(n.jsx)("th",{children:"Saved Albums"}),Object(n.jsx)("th",{children:"Saved Tracks"})]})}),Object(n.jsx)("tbody",{className:"artistListBody",children:t.map((function(t){return Object(n.jsx)(A,{artist:t},t.name)}))})]})]})},B=function(t){return Object(n.jsxs)("table",{className:"trackList",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Track Name"}),Object(n.jsx)("th",{children:"Album"}),Object(n.jsx)("th",{children:"Artist"})]})}),Object(n.jsx)("tbody",{children:t.list.map((function(e){return function(e){for(var s="",r=0;r<e.artists.length-1;r++)s+=e.artists[r],s+=", ";return s+=e.artists[e.artists.length-1],Object(n.jsxs)("tr",{className:"track",onClick:function(){return t.remove?t.remove(e):console.log(e)},children:[Object(n.jsx)("td",{children:e.name}),Object(n.jsx)("td",{children:e.albumName}),Object(n.jsx)("td",{children:s})]},e.name)}(e)}))})]})},T=function(t){var e,s=t.changeLogin,i=t.spotifyURL,c=Object(r.useState)({}),a=Object(k.a)(c,2),o=a[0],l=a[1],u=Object(r.useContext)(x).startup;Object(r.useEffect)((function(){l(i)}),[i]);return void 0===o?Object(n.jsx)("p",{children:"We are generating your sign in link now"}):Object(n.jsx)("button",{className:"signInButton",onClick:function(){return function(){e=window.open(o,"Spotify","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730");var t=setInterval((function(){e.closed&&(clearInterval(t),s(),u())}),1e3)}()},children:"Log In"})},E=function(){var t=Object(r.useContext)(x),e=t.artistLibrary,s=t.display;return e.length>0?Object(n.jsx)("div",{className:"homeDiv",children:Object(n.jsx)(N,{children:"My Library"===s?Object(n.jsx)(v,{}):"Create"===s?Object(n.jsx)(U,{}):"User Info"===s?Object(n.jsx)(P,{}):"Base"===s?Object(n.jsxs)("div",{className:"instructions",children:[Object(n.jsx)("h1",{children:"Ok, let's get to work!"}),Object(n.jsx)("p",{children:"Make a selection above to get started"})]}):void 0})}):Object(n.jsx)("div",{className:"homeDiv",children:Object(n.jsx)("h3",{children:"Please hold while I retrieve your music library!"})})},G=s.p+"static/media/Spotify_Logo_RGB_Black.0d1e5545.png",M=function(t){var e=t.loggedIn,s=t.changeLogin,i=t.spotifyURL,c=Object(r.useContext)(x),a=c.displayOptions,o=c.setContextState;return e?Object(n.jsxs)("div",{className:"navbar",children:[Object(n.jsx)("div",{className:"logoDiv",children:Object(n.jsx)("img",{src:G,alt:"logo",className:"logo"})}),Object(n.jsx)("ul",{className:"menu",children:a.map((function(t,e){return Object(n.jsx)("li",{id:"menuItem",onClick:function(){o("display",t)},children:t},e)}))})]}):Object(n.jsxs)("div",{className:"navbar",children:[Object(n.jsx)("div",{className:"logoDiv",children:Object(n.jsx)("img",{src:G,alt:"logo",className:"logo"})}),Object(n.jsx)(T,{changeLogin:s,spotifyURL:i})]})},P=function(){var t=Object(r.useContext)(x).user;return Object(n.jsxs)("div",{className:"userInfo",children:[Object(n.jsxs)("h1",{children:[t.display_name,":"]}),function(t){return Object(n.jsxs)("ul",{className:"infoList",children:[Object(n.jsxs)("li",{children:[Object(n.jsx)("b",{children:"Username:"})," ",t.display_name]}),Object(n.jsxs)("li",{children:[Object(n.jsx)("b",{children:"Country:"})," ",t.country]}),Object(n.jsxs)("li",{children:[Object(n.jsx)("b",{children:"Email:"})," ",t.email]}),Object(n.jsxs)("li",{children:[Object(n.jsx)("b",{children:"Subscription Type:"})," ",t.product]})]})}(t)]})},U=function(){var t=Object(r.useContext)(C).createOption;return Object(n.jsxs)("div",{className:"createPage",children:[Object(n.jsxs)("div",{className:"createHead",children:[Object(n.jsx)("h1",{children:"Create a playlist"}),Object(n.jsx)(R,{})]}),"genre"===t?Object(n.jsxs)("div",{className:"create",children:[Object(n.jsx)(F,{}),Object(n.jsx)(D,{})]}):"artist"===t?Object(n.jsxs)("div",{className:"create",children:[Object(n.jsx)(_,{}),Object(n.jsx)(D,{})]}):"create"===t?Object(n.jsx)("div",{className:"create",children:Object(n.jsx)(D,{})}):Object(n.jsxs)("div",{className:"createPage",children:[Object(n.jsx)("p",{children:"Use this page to create playlists based on all the genres present in your library or by one or multiple artists present in your library."}),Object(n.jsx)("p",{children:"Make a selection to continue."})]})]})},R=function(){var t=Object(r.useContext)(x).artistLibrary,e=Object(r.useContext)(C),s=e.createOption,i=e.selectedList,c=e.artistList,a=e.setCreateOption,o=e.setList,l=e.setSelectedList,u=e.compileGenres,j=e.findArtistsByGenre,d=function(e,n){if("create"===s&&"create"!==e)"genre"===e?(console.log("create option switched from create to genre"),i.every((function(t){return"string"===typeof t}))?(console.log("create option used to be genre"),a(e)):(console.log("create option used to be artist"),l(u(i)),a(e),o(n))):"artist"===e&&(console.log("create option switched from create to artist"),i.every((function(t){return"object"===typeof t}))?(console.log("create option used to be artist"),a(e)):(console.log("create option used to be genre"),l(c),a(e),o(t)));else if("artist"===s&&"genre"===e){l(u(i)),a(e),o(n)}else if("genre"===s&&"artist"===e){l(j(i,t)),a(e),o(n)}else{if(s===e)return;o(n),a(e),l([])}};return Object(n.jsxs)("div",{className:"createSelections",children:[Object(n.jsx)("button",{onClick:function(){return d("genre",u(t))},children:"Create by genre"}),Object(n.jsx)("button",{onClick:function(){return d("artist",t)},children:"Create by artist"})]})},F=function(){var t=Object(r.useContext)(C).list;return Object(n.jsx)("ul",{className:"list",children:t.map((function(t,e){return Object(n.jsx)(H,{item:t},e)}))})},D=function(){var t=Object(r.useContext)(C),e=t.createOption,s=t.selectedList,i=t.artistList,c=t.trackList,a=t.setSelectedList,o=t.setTrackList,l=t.changeOption,u=t.pullURIFromTracks,j=Object(r.useContext)(x).createPlaylist,d=Object(r.useRef)(null),b=Object(r.useState)("default-genre"),h=Object(k.a)(b,2),O=h[0],p=h[1],f=function(){var t=d.current.value;if(t){var e=u(c);j(e,t)}else console.log("you need a name!"),alert("You need to name your playlist first!"),d.current.value="GIVE ME A NAME FIRST"},g=function(t){o(l(t,c))};return"artist"===e?Object(n.jsxs)("div",{className:"playlistMaker",children:[Object(n.jsx)("p",{children:"Here are your selected artists so far:"}),Object(n.jsx)("ul",{className:"playlistMakerList",children:s.sort((function(t,e){return t.name>e.name?1:-1})).map((function(t,e){return Object(n.jsx)("li",{onClick:function(e){a(l(t,s))},children:t.name},e)}))}),Object(n.jsx)(J,{})]}):"genre"===e?Object(n.jsxs)("div",{className:"playlistMaker",children:[Object(n.jsx)("p",{children:"Here are your selected genres so far:"}),"default-genre"===O?Object(n.jsx)("ul",{className:"playlistMakerList",children:s.sort().map((function(t,e){return Object(n.jsx)("li",{onClick:function(e){a(l(t,s))},children:t},e)}))}):"default-artist"===O?Object(n.jsx)("ul",{className:"playlistMakerList",children:i.sort((function(t,e){return t.name>e.name?1:-1})).map((function(t,e){return Object(n.jsx)("li",{children:t.name},e)}))}):void 0,Object(n.jsx)(J,{display:O,setDisplay:p})]}):"create"===e?Object(n.jsxs)("div",{className:"playlistMaker",children:[Object(n.jsx)("p",{children:"Here is the current version of your playlist:"}),Object(n.jsx)(B,{list:c,remove:g}),Object(n.jsxs)("form",{className:"name-playlist",children:[Object(n.jsx)("label",{children:"Name your playlist:"}),Object(n.jsx)("input",{type:"text",name:"Name your playlist",ref:d})]}),Object(n.jsx)("b",{children:"Clicking 'Create' below will create a playlist with these artists"}),Object(n.jsx)("br",{}),Object(n.jsx)(J,{beginPlaylist:f})]}):void 0},_=function(){var t=Object(r.useContext)(C).list;return Object(n.jsx)("ul",{className:"list",children:t.map((function(t,e){return Object(n.jsx)(H,{item:t},e)}))})},H=function(t){var e=t.item,s=Object(r.useContext)(C),i=s.selectedList,c=s.setSelectedList,a=s.changeOption,o=!1,l="object"===typeof e?e.name:e;return i.includes(e)&&(o=!0),Object(n.jsx)("li",{children:Object(n.jsxs)("label",{children:[Object(n.jsx)("input",{type:"checkbox",checked:o,value:l,onChange:function(t){return c(a(e,i))}}),l]})})},J=function(t){var e=Object(r.useContext)(C),s=e.createOption,i=e.selectedList,c=e.setCreateOption,a=e.setSelectedList,o=e.setArtistList,l=e.setTrackList,u=e.clearSelection,j=e.associateArtists,d=e.findArtistsByGenre,b=e.pullTracksFromArtists,h=e.goBack,O=Object(r.useContext)(x).artistLibrary,p=function(){var t=i;"genre"===s&&(t=d(t,O));var e=b(t).sort((function(t,e){return t.artists[0]>e.artists[0]?1:-1}));l(e),c("create")};return"genre"===s?Object(n.jsxs)("div",{className:"createButtons",children:[Object(n.jsx)("button",{onClick:function(){return function(){if(console.log("toggling: ",t.display),"default-genre"===t.display){var e=d(i,O);o(e),t.setDisplay("default-artist")}else"default-artist"===t.display&&t.setDisplay("default-genre")}()},children:"default-genre"===t.display?"Show Artists":"Show Selected Genres"}),Object(n.jsx)("button",{onClick:function(){return p()},children:"Show Playlist"}),Object(n.jsx)("button",{onClick:function(){u(),t.setDisplay("default-genre")},children:"Clear Selection"})]}):"artist"===s?Object(n.jsxs)("div",{className:"createButtons",children:[Object(n.jsx)("button",{onClick:function(){return a(j(i,O))},children:"Associate Artists"}),Object(n.jsx)("button",{onClick:function(){return p()},children:"Show Playlist"}),Object(n.jsx)("button",{onClick:function(){u()},children:"Clear Selection"})]}):"create"===s?Object(n.jsxs)("div",{className:"createButtons",children:[Object(n.jsx)("button",{onClick:function(){return t.beginPlaylist()},children:"Create"}),Object(n.jsx)("button",{onClick:function(){return h()},children:"Go Back"}),Object(n.jsx)("button",{onClick:function(){u()},children:"Clear Selection"})]}):void 0},W=function(t){Object(b.a)(s,t);var e=Object(h.a)(s);function s(t){var n;return Object(j.a)(this,s),(n=e.call(this,t)).changeLogin=function(){console.log("changing login state now"),n.setState({loggedIn:!0})},n.state={url:void 0,loggedIn:!1},n}return Object(d.a)(s,[{key:"componentDidMount",value:function(){var t=Object(u.a)(l.a.mark((function t(){var e,s,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=function(){return(n=Object(u.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p()({method:"get",url:"http://localhost:8888/login",withCredentials:!0});case 2:return e=t.sent,t.abrupt("return",e.data.body);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)},s=function(){return n.apply(this,arguments)},console.log("running getURL"),t.next=6,s();case 6:e=t.sent,this.setState({url:e});case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.loggedIn&&void 0!==this.state.url?Object(n.jsxs)(y,{children:[Object(n.jsx)(M,{loggedIn:this.state.loggedIn}),Object(n.jsx)("div",{className:"topLevel",children:Object(n.jsx)(E,{})})]}):Object(n.jsxs)(y,{loggedIn:this.state.loggedIn,children:[Object(n.jsx)(M,{loggedIn:this.state.loggedIn,changeLogin:this.changeLogin,spotifyURL:this.state.url}),Object(n.jsxs)("div",{className:"topLevel",children:[Object(n.jsx)("h1",{children:"Welcome to my Spotify playlist generator app!"}),Object(n.jsx)("p",{children:"This app will allow you to generate playlists using songs already in your library. This assists with playlist generation for users who have lots of songs already in their library and automates the process of manually going through and adding songs to a playlist one by one."}),Object(n.jsx)("h2",{children:"To get started, click the log in button above to generate a sign in link."})]})]})}}]),s}(r.Component);a.a.render(Object(n.jsx)(W,{}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.024e76b0.chunk.js.map